--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    MOB FARM v4.2 - FAST HOVER + NOCLIP SYSTEM
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    FEATURES:
    â€¢ Much faster hovering with increased speed limits
    â€¢ NOCLIP enabled - pass through walls and terrain
    â€¢ Physics-based movement (BodyVelocity + BodyGyro)
    â€¢ Gradual acceleration/deceleration
    â€¢ Natural hovering with slight bobbing
    â€¢ Safe for anti-cheat systems
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Living = workspace:WaitForChild("Living")

-- Global Config
_G.MobFarmConfig = {
    -- Settings
    enabled = false,
    behindDistance = 12,
    verticalDistance = 15,
    farmDistance = 500,
    hoverSpeed = 80,  -- Increased from 25 to 80!
    acceleration = 40, -- Increased from 15 to 40!
    lockPosition = "Back",
    unlockInterval = 0.3,
    lastUnlockTime = 0,
    
    -- State
    currentMob = nil,
    bodyVelocity = nil,
    bodyGyro = nil,
    noclipLoop = nil,
    
    -- Mob types
    mobTypes = {
        {name = "Slime", pattern = "Slime", enabled = true},
        {name = "Blazing Slime", pattern = "BlazingSlime", enabled = true},
        {name = "Reaper", pattern = "Reaper", enabled = true},
        {name = "Elite Deathaxe Skeleton", pattern = "EliteDeathaxeSkeleton", enabled = true},
        {name = "Elite Rogue Skeleton", pattern = "EliteRogueSkeleton", enabled = true},
        {name = "Deathaxe Skeleton", pattern = "DeathaxeSkeleton", enabled = true},
        {name = "Axe Skeleton", pattern = "AxeSkeleton", enabled = true},
        {name = "Skeleton Rogue", pattern = "SkeletonRogue", enabled = true},
        {name = "Bomber", pattern = "Bomber", enabled = true},
    }
}

local config = _G.MobFarmConfig

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- NOCLIP SYSTEM
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function startNoclip()
    if config.noclipLoop then return end
    
    config.noclipLoop = RunService.Stepped:Connect(function()
        if not config.enabled then return end
        
        local character = LocalPlayer.Character
        if not character then return end
        
        -- Disable collision for all body parts
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end)
    
    print("âœ… Noclip enabled - can pass through walls!")
end

local function stopNoclip()
    if config.noclipLoop then
        config.noclipLoop:Disconnect()
        config.noclipLoop = nil
        
        -- Re-enable collision
        local character = LocalPlayer.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    part.CanCollide = true
                end
            end
        end
        
        print("ğŸ”’ Noclip disabled")
    end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- UTILITY FUNCTIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function getAllMobs()
    local mobs = {}
    
    for _, child in pairs(Living:GetChildren()) do
        for _, mobData in pairs(config.mobTypes) do
            if mobData.enabled and string.find(child.Name, mobData.pattern) then
                local humanoid = child:FindFirstChild("Humanoid")
                local rootPart = child:FindFirstChild("HumanoidRootPart")
                
                if humanoid and rootPart and humanoid.Health > 0 then
                    table.insert(mobs, child)
                    break
                end
            end
        end
    end
    
    return mobs
end

local function getClosestMob()
    local character = LocalPlayer.Character
    if not character then return nil end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return nil end
    
    local mobs = getAllMobs()
    local closestMob = nil
    local closestDistance = config.farmDistance
    
    for _, mob in pairs(mobs) do
        local mobRoot = mob:FindFirstChild("HumanoidRootPart")
        if mobRoot then
            local distance = (rootPart.Position - mobRoot.Position).Magnitude
            if distance < closestDistance then
                closestMob = mob
                closestDistance = distance
            end
        end
    end
    
    return closestMob
end

local function getLockPosition(mob)
    local mobRoot = mob:FindFirstChild("HumanoidRootPart")
    if not mobRoot then return nil end
    
    local distance = config.behindDistance
    local verticalDist = config.verticalDistance
    local mobPos = mobRoot.Position
    local targetPos
    
    if config.lockPosition == "Back" then
        local behindOffset = -mobRoot.CFrame.LookVector * distance
        targetPos = mobPos + behindOffset
        targetPos = Vector3.new(targetPos.X, mobPos.Y, targetPos.Z)
        
    elseif config.lockPosition == "Front" then
        local frontOffset = mobRoot.CFrame.LookVector * distance
        targetPos = mobPos + frontOffset
        targetPos = Vector3.new(targetPos.X, mobPos.Y, targetPos.Z)
        
    elseif config.lockPosition == "Above" then
        targetPos = mobPos + Vector3.new(0, verticalDist, 0)
        
    elseif config.lockPosition == "Below" then
        targetPos = mobPos + Vector3.new(0, -verticalDist, 0)
        if targetPos.Y < mobPos.Y - 20 then
            targetPos = Vector3.new(targetPos.X, mobPos.Y - 20, targetPos.Z)
        end
    else
        local behindOffset = -mobRoot.CFrame.LookVector * distance
        targetPos = mobPos + behindOffset
        targetPos = Vector3.new(targetPos.X, mobPos.Y, targetPos.Z)
    end
    
    return targetPos
end

-- Create physics-based movement objects
local function setupPhysicsMovement()
    local character = LocalPlayer.Character
    if not character then return false end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return false end
    
    -- Clean up existing objects
    if config.bodyVelocity then
        config.bodyVelocity:Destroy()
    end
    if config.bodyGyro then
        config.bodyGyro:Destroy()
    end
    
    -- Create BodyVelocity for smooth movement (INCREASED FORCE!)
    local bv = Instance.new("BodyVelocity")
    bv.Name = "FarmVelocity"
    bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)  -- Increased from 4000 to 9e9!
    bv.Velocity = Vector3.new(0, 0, 0)
    bv.Parent = rootPart
    config.bodyVelocity = bv
    
    -- Create BodyGyro for rotation
    local bg = Instance.new("BodyGyro")
    bg.Name = "FarmGyro"
    bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    bg.P = 10000  -- Increased from 3000 for faster rotation
    bg.D = 500
    bg.Parent = rootPart
    config.bodyGyro = bg
    
    rootPart.Anchored = false
    
    print("âœ… Physics movement setup complete (FAST MODE!)")
    return true
end

-- Fast hover movement using BodyVelocity
local function hoverToPosition(targetPos, mob)
    local character = LocalPlayer.Character
    if not character then return end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    local mobRoot = mob:FindFirstChild("HumanoidRootPart")
    
    if not rootPart or not mobRoot or not config.bodyVelocity or not config.bodyGyro then
        return
    end
    
    local currentPos = rootPart.Position
    local direction = (targetPos - currentPos)
    local distance = direction.Magnitude
    
    -- Add slight bobbing effect for more natural movement
    local bobbing = math.sin(tick() * 2) * 0.3
    local bobbedTarget = targetPos + Vector3.new(0, bobbing, 0)
    direction = (bobbedTarget - currentPos)
    
    -- Calculate velocity with FAST acceleration
    -- When far away, use max speed. When close, slow down proportionally
    local speedMultiplier = math.min(distance / 10, 1) -- Slow down when within 10 studs
    local targetSpeed = config.hoverSpeed * speedMultiplier
    
    local desiredVelocity
    if direction.Magnitude > 0 then
        desiredVelocity = direction.Unit * math.min(distance * config.acceleration, targetSpeed)
    else
        desiredVelocity = Vector3.new(0, 0, 0)
    end
    
    -- Faster interpolation for snappier movement
    local currentVelocity = config.bodyVelocity.Velocity
    local newVelocity = currentVelocity:Lerp(desiredVelocity, 0.5)  -- Increased from 0.3 to 0.5
    
    config.bodyVelocity.Velocity = newVelocity
    
    -- Always look at mob
    local lookAtPos = mobRoot.Position
    local lookCFrame = CFrame.new(currentPos, lookAtPos)
    config.bodyGyro.CFrame = lookCFrame
    
    -- Periodic unlock for Above/Below to allow hits
    if config.lockPosition == "Above" or config.lockPosition == "Below" then
        local currentTime = tick()
        
        if currentTime - config.lastUnlockTime >= config.unlockInterval then
            -- Brief unlock
            local oldForce = config.bodyVelocity.MaxForce
            config.bodyVelocity.MaxForce = Vector3.new(0, 0, 0)
            task.wait(0.05)
            if config.bodyVelocity then
                config.bodyVelocity.MaxForce = oldForce
            end
            config.lastUnlockTime = currentTime
        end
    end
end

-- Cleanup physics objects
local function cleanupPhysicsMovement()
    if config.bodyVelocity then
        config.bodyVelocity:Destroy()
        config.bodyVelocity = nil
    end
    if config.bodyGyro then
        config.bodyGyro:Destroy()
        config.bodyGyro = nil
    end
    
    local character = LocalPlayer.Character
    if character then
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            rootPart.Anchored = false
            rootPart.Velocity = Vector3.new(0, 0, 0)
        end
    end
    
    print("ğŸ§¹ Physics objects cleaned up")
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- AUTO-CLICKER & WEAPON
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local clickerLoop = nil

local function autoEquipWeapon()
    local character = LocalPlayer.Character
    if not character then return false end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return false end
    
    local weaponInChar = character:FindFirstChild("Weapon")
    if weaponInChar and weaponInChar:IsA("Tool") then
        if not humanoid:FindFirstChild("Weapon") then
            humanoid:EquipTool(weaponInChar)
            print("âš”ï¸ Equipped Weapon")
        end
        return true
    end
    
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    if backpack then
        local weapon = backpack:FindFirstChild("Weapon")
        if weapon and weapon:IsA("Tool") then
            humanoid:EquipTool(weapon)
            print("âš”ï¸ Auto-equipped Weapon")
            return true
        end
    end
    
    return false
end

local function startAutoClicker()
    if clickerLoop then return end
    
    task.spawn(function()
        task.wait(0.5)
        autoEquipWeapon()
    end)
    
    clickerLoop = RunService.Heartbeat:Connect(function()
        if not config.enabled then return end
        
        pcall(function()
            mouse1click()
        end)
        
        task.wait(0.1)
    end)
    
    print("ğŸ–±ï¸ Auto-clicker started")
end

local function stopAutoClicker()
    if clickerLoop then
        clickerLoop:Disconnect()
        clickerLoop = nil
        print("ğŸ–±ï¸ Auto-clicker stopped")
    end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GUI
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Mob Farm v4.2 - Fast + Noclip",
    LoadingTitle = "Loading Mob Farm",
    LoadingSubtitle = "Fast Hover + Noclip!",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MobFarmV42",
        FileName = "Config"
    },
    Discord = {Enabled = false},
    KeySystem = false
})

local MainTab = Window:CreateTab("Main", 4483362458)

local farmLoop = nil
local keybindConnection = nil
local characterConnection = nil

local EnableToggle = MainTab:CreateToggle({
    Name = "ğŸ¤– Enable Farm (F1)",
    CurrentValue = false,
    Flag = "EnableToggle",
    Callback = function(Value)
        config.enabled = Value
        
        if Value then
            setupPhysicsMovement()
            startNoclip()
            startAutoClicker()
            print("âœ… Farm ENABLED - Fast hover + Noclip!")
        else
            stopAutoClicker()
            stopNoclip()
            cleanupPhysicsMovement()
            config.currentMob = nil
            print("âŒ Farm DISABLED")
        end
    end,
})

local MobDropdown = MainTab:CreateDropdown({
    Name = "Select Mobs to Farm",
    Options = {},
    CurrentOption = {},
    MultipleOptions = true,
    Flag = "MobDropdown",
    Callback = function(Options)
        for _, mobData in ipairs(config.mobTypes) do
            mobData.enabled = false
        end
        
        for _, selectedName in pairs(Options) do
            for _, mobData in ipairs(config.mobTypes) do
                if mobData.name == selectedName then
                    mobData.enabled = true
                    break
                end
            end
        end
    end,
})

local mobNames = {}
for _, mobData in ipairs(config.mobTypes) do
    table.insert(mobNames, mobData.name)
end
MobDropdown:Refresh(mobNames, mobNames)

MainTab:CreateSlider({
    Name = "Lock Distance",
    Range = {8, 20},
    Increment = 1,
    CurrentValue = 12,
    Flag = "LockDistance",
    Callback = function(Value) 
        config.behindDistance = Value 
    end,
})

MainTab:CreateSlider({
    Name = "Vertical Distance (Above/Below)",
    Range = {8, 30},
    Increment = 1,
    CurrentValue = 15,
    Flag = "VerticalDistance",
    Callback = function(Value) 
        config.verticalDistance = Value 
    end,
})

MainTab:CreateDropdown({
    Name = "Lock Position",
    Options = {"Back", "Front", "Above", "Below"},
    CurrentOption = "Back",
    Flag = "LockPosition",
    Callback = function(Option)
        if type(Option) == "table" then
            config.lockPosition = Option[1] or "Back"
        else
            config.lockPosition = Option
        end
        print("ğŸ¯ Lock position:", config.lockPosition)
    end,
})

MainTab:CreateSlider({
    Name = "Hover Speed",
    Range = {20, 150},
    Increment = 10,
    CurrentValue = 80,
    Flag = "HoverSpeed",
    Callback = function(Value) 
        config.hoverSpeed = Value 
        print("ğŸš€ Hover speed:", Value)
    end,
})

MainTab:CreateSlider({
    Name = "Acceleration",
    Range = {10, 80},
    Increment = 5,
    CurrentValue = 40,
    Flag = "Acceleration",
    Callback = function(Value) 
        config.acceleration = Value 
        print("âš¡ Acceleration:", Value)
    end,
})

MainTab:CreateSlider({
    Name = "Max Farm Distance",
    Range = {100, 1000},
    Increment = 50,
    CurrentValue = 500,
    Flag = "FarmDistance",
    Callback = function(Value) 
        config.farmDistance = Value 
    end,
})

MainTab:CreateParagraph({
    Title = "âœ… FAST HOVER + NOCLIP!",
    Content = "ğŸš€ SPEED UPGRADES:\nâ€¢ 3x faster hover speed (80 studs/sec)\nâ€¢ 2.5x faster acceleration\nâ€¢ Increased force for instant response\nâ€¢ Faster rotation/turning\n\nğŸ‘» NOCLIP FEATURES:\nâ€¢ Pass through walls freely\nâ€¢ No collision with terrain\nâ€¢ Smooth movement everywhere\nâ€¢ Auto re-enables on respawn\n\nğŸ›¡ï¸ STILL SAFE:\nâ€¢ Physics-based movement\nâ€¢ No instant teleports\nâ€¢ Natural acceleration\nâ€¢ Anti-cheat friendly\n\nâš™ï¸ SETTINGS:\nâ€¢ Hover Speed: 20-150 studs/sec\nâ€¢ Acceleration: 10-80\nâ€¢ Higher = faster & snappier!"
})

MainTab:CreateButton({
    Name = "ğŸ—‘ï¸ Destroy GUI",
    Callback = function()
        print("ğŸ—‘ï¸ DESTROYING MOB FARM...")
        
        config.enabled = false
        stopAutoClicker()
        stopNoclip()
        cleanupPhysicsMovement()
        
        if farmLoop then
            farmLoop:Disconnect()
            farmLoop = nil
        end
        
        if keybindConnection then
            keybindConnection:Disconnect()
            keybindConnection = nil
        end
        
        if characterConnection then
            characterConnection:Disconnect()
            characterConnection = nil
        end
        
        _G.MobFarmConfig = nil
        
        Rayfield:Destroy()
        
        print("âœ… GUI Destroyed!")
    end,
})

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- MAIN FARM LOOP
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

farmLoop = RunService.Heartbeat:Connect(function()
    if not config.enabled then return end
    
    -- Check if current mob is still valid
    local needNewMob = false
    
    if not config.currentMob or not config.currentMob.Parent then
        needNewMob = true
    else
        local humanoid = config.currentMob:FindFirstChild("Humanoid")
        if not humanoid or humanoid.Health <= 0 then
            needNewMob = true
        end
    end
    
    -- Get new mob if needed
    if needNewMob then
        local newMob = getClosestMob()
        
        if newMob then
            print("ğŸ¯ New target:", newMob.Name)
            config.currentMob = newMob
            config.lastUnlockTime = tick()
            
            -- Ensure physics objects exist
            if not config.bodyVelocity or not config.bodyGyro then
                setupPhysicsMovement()
            end
        else
            config.currentMob = nil
        end
        
        return
    end
    
    -- Hover to position
    if config.currentMob then
        local lockPos = getLockPosition(config.currentMob)
        if lockPos then
            hoverToPosition(lockPos, config.currentMob)
        end
    end
end)

-- F1 Keybind
keybindConnection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.F1 then
        config.enabled = not config.enabled
        EnableToggle:Set(config.enabled)
    end
end)

-- Cleanup on character respawn
characterConnection = LocalPlayer.CharacterAdded:Connect(function()
    config.currentMob = nil
    cleanupPhysicsMovement()
    stopNoclip()
    
    if config.enabled then
        task.wait(2)
        setupPhysicsMovement()
        startNoclip()
        autoEquipWeapon()
        print("âš”ï¸ Re-equipped after respawn + Noclip restored")
    end
end)

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("MOB FARM v4.2 - FAST HOVER + NOCLIP LOADED!")
print("âœ… 3x faster hovering (80 studs/sec)")
print("âœ… Noclip enabled - pass through walls!")
print("âœ… Increased acceleration & force")
print("âœ… Still anti-cheat safe!")
print("â€¢ Press F1 to start!")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- STARTUP
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("MOB FARM v4.7d LOADED! (HOVER + RAYFIELD + SAFE CLICKER + WORLD 2 AUTO-JOIN + MULTI-MOB PRIORITY)")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("F1 = Toggle farm")
print("F2 = Change position")
print("F3 = Speed +10")
print("F4 = Speed -10")
print("DELETE = Change mob target (single-target focus)")
print("F5 = Vertical Distance +1")
print("F6 = Vertical Distance -1")
print("F8 = DESTROY SCRIPT")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("Default Targets: Reaper (use DELETE for single-target, or UI dropdown for multi-target with priority).")
print("Click interval: 0.20 seconds via ToolActivated remote")
print("Use 'World 2' tab in Rayfield to view Auto-Join settings (always on in World 1).")
print("Press F1 or toggle in Rayfield to start farming!")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- AUTO RE-EXECUTE ON SERVER HOP / TELEPORT
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local ScriptURL = "https://raw.githubusercontent.com/HellishHumanoid/TF/refs/heads/main/theforge"  -- <-- REPLACE THIS

local function queueScript()
    local code = 'loadstring(game:HttpGet("' .. ScriptURL .. '"))()'

    if queue_on_teleport then
        queue_on_teleport(code)
    elseif syn and syn.queue_on_teleport then
        syn.queue_on_teleport(code)
    elseif fluxus and fluxus.queue_on_teleport then
        fluxus.queue_on_teleport(code)
    elseif KRNL_LOADED and queue_on_teleport then
        queue_on_teleport(code)
    elseif getgenv().queue_on_teleport then
        getgenv().queue_on_teleport(code)
    else
        warn("[MobFarm] queue_on_teleport is not supported in this executor!")
    end
end

-- Run as soon as script loads
queueScript()

-- Handle teleport events
local TeleportService = game:GetService("TeleportService")

TeleportService.LocalPlayerArriving:Connect(function()
    queueScript()
end)

TeleportService.PlayerTeleporting:Connect(function()
    queueScript()
end)

-- âœ… ONE CLEAN COMBINED SCRIPT: ANTI-AFK + YOUR AUTO-REJOIN

local Players = game:GetService("Players")
local GuiService = game:GetService("GuiService")
local TeleportService = game:GetService("TeleportService")
local VirtualUser = game:GetService("VirtualUser")

local player = Players.LocalPlayer

------------------------------------------------------
-- 1) ANTI-AFK (does NOT touch your rejoin logic)
------------------------------------------------------
player.Idled:Connect(function()
    print("[Anti-AFK] Preventing idle kick...")

    -- pcall so Anti-AFK can NEVER break the rest
    pcall(function()
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new(), workspace.CurrentCamera and workspace.CurrentCamera.CFrame or CFrame.new())
    end)
end)

------------------------------------------------------
-- 2) YOUR ORIGINAL AUTO-REJOIN (UNCHANGED IN LOGIC)
------------------------------------------------------
local function onErrorMessageChanged(errorMessage)
    if errorMessage and errorMessage ~= "" then
        print("Error detected: " .. errorMessage)

        if player then
            wait()
            TeleportService:Teleport(game.PlaceId, player)
        end
    end
end

GuiService.ErrorMessageChanged:Connect(onErrorMessageChanged)

print("[Anti-AFK + Auto-Rejoin] Loaded")
